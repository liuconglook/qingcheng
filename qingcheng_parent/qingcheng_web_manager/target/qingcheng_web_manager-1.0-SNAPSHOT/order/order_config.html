<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>orderConfig管理</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="../plugins/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="hold-transition">
<div id="app">

    <div class="content-header">
        <h1>管理<small>订单设置</small></h1>
        <el-breadcrumb separator-class="el-icon-arrow-right" class="breadcrumb">
            <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
            <el-breadcrumb-item>管理</el-breadcrumb-item>
            <el-breadcrumb-item>订单设置</el-breadcrumb-item>
        </el-breadcrumb>
    </div>

    <div class="app-container">
        <div class="box">
            <div class="filter-container">
            </div>
            <div class="add-form" style="margin: 0 auto;width: 500px">
                <el-form :model="pojo" ref="pojo" status-icon label-width="200px" class="demo-ruleForm">
                    <el-form-item :rules="rules" label="正常订单超时时间（分）：" prop="orderTimeout">
                        <el-input type="orderTimeout" v-model.number="pojo.orderTimeout" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item :rules="rules" label="秒杀订单超时时间（分）：" prop="seckillTimeout">
                        <el-input v-model.number="pojo.seckillTimeout" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item :rules="rules" label="自动收货（天）：" prop="takeTimeout">
                        <el-input v-model.number="pojo.takeTimeout" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item :rules="rules" label="售后期限：" prop="serviceTimeout">
                        <el-input v-model.number="pojo.serviceTimeout" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item :rules="rules" label="自动五星好评：" prop="commentTimeout">
                        <el-input v-model.number="pojo.commentTimeout" autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item>
                        <el-button type="primary" @click="save('pojo')">更新</el-button>
                    </el-form-item>
                </el-form>

            </div>
        </div>
    </div>
</div>
</body>
<script src="/js/vue.js"></script>
<script src="/js/axios.js"></script>
<script src="/js/elementui.js"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script>
     new Vue({
        el: '#app',
        data(){
            return {
                pojo: {id: 1,orderTimeout:''},
                rules: [
                    { required: true, message: '不能为空'},
                    { type: 'number', message: '必须为数字值'}
                ]
            }
        },
        created(){
            this.fetchData();
        },
        methods:{
            fetchData (){
                axios.get(`/orderConfig/findById.do?id=1`).then(response => {
                    this.pojo = response.data;
                });
            },
            save (formName){
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        axios.post(`/orderConfig/update.do`,this.pojo).then(response => {
                            this.fetchData (); //刷新列表
                            this.$message({
                                message: '更新成功！',
                                type: 'success'
                            });
                        });
                    }
                });
            }
        }
    })
</script>
</html>
